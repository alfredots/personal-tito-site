---
import { whatsappLink } from "../assets/data";
import resultOne from "../assets/results/result-1.jpeg";
import resultTwo from "../assets/results/result-2.jpeg";
import resultThree from "../assets/results/result-3.jpeg";
import resultFour from "../assets/results/result-6.jpeg";
import resultFive from "../assets/results/result-5.jpeg";

const transformations = [
	{
		image: resultOne.src,
		name: "Aluna M.",
		duration: "6 Meses"
	},
	{
		image: resultTwo.src,
		name: "Aluna K.",
		duration: "4 Meses"
	},
	{
		image: resultThree.src,
		name: "Aluna R.",
		duration: "3 Meses"
	},
	{
		image: resultFour.src,
		name: "Aluna P.",
		duration: "8 Meses"
	},
	{
		image: resultFive.src,
		name: "Aluna T.",
		duration: "5 Meses"
	}
];
---

<section id="results" class="py-20 md:py-32">
	<div class="section-container">
		<div class="mb-16 text-center">
			<div class="heading-accent">Transformações Reais de Clientes</div>
			<h2 class="section-title">Resultados que Falam por Si</h2>
			<p class="section-subtitle">Resultados que falam mais alto que palavras. Conheça algumas das mulheres que decidiram confiar no processo e transformaram seus corpos e suas vidas:</p>
		</div>

		<div class="relative overflow-hidden">
			<div class="horizontal-scroll flex gap-6" id="scroll-container">
				{
					transformations.concat(transformations).map((transformation, index) => (
						<div class="glass-card min-w-[300px] max-w-[350px] overflow-hidden">
							<div class="relative aspect-[3/4]">
								<img src={transformation.image} alt={`Transformação de ${transformation.name}`} class="h-full w-full object-cover" />
							</div>
							<div class="p-6">
								<h3 class="mb-1 text-lg font-medium">{transformation.name}</h3>
								<p class="mb-3 text-sm text-muted-foreground">{transformation.duration} de Transformação</p>
							</div>
						</div>
					))
				}
			</div>
		</div>

		<div class="mt-16 text-center">
			<a
				href={whatsappLink}
				class="btn-animated inline-flex items-center justify-center gap-2 rounded-lg bg-primary px-8 py-4 text-lg font-bold text-white shadow-lg transition-all duration-300 hover:translate-y-[-3px] hover:scale-105 hover:bg-primary/90 hover:shadow-xl focus-visible:outline-none focus-visible:ring-4 focus-visible:ring-primary/50"
			>
				Quero fazer parte do time!
			</a>
		</div>
	</div>
</section>

<script lang="ts">
	const scrollContainer = document.getElementById("scroll-container");

	function startInfiniteScroll() {
		if (!scrollContainer) {
			console.warn("Elemento scroll-container não encontrado");
			return;
		}

		let position = 0;
		const speed = 1;

		function animate() {
			position -= speed;

			// Reset quando todo o conteúdo passou
			if (Math.abs(position) >= scrollContainer.scrollWidth) {
				position = 0;
			}

			scrollContainer.style.transform = `translateX(${position}px)`;
			requestAnimationFrame(animate);
		}

		// Adicione estas propriedades CSS via JavaScript
		scrollContainer.style.willChange = "transform";
		scrollContainer.style.transform = "translateZ(0)";

		requestAnimationFrame(animate);
	}

	if (document.readyState === "loading") {
		document.addEventListener("DOMContentLoaded", startInfiniteScroll);
	} else {
		startInfiniteScroll();
	}
</script>

<style>
	.horizontal-scroll {
		display: flex;
		overflow: hidden; /* Mudado de overflow-x: auto para hidden */
		-webkit-overflow-scrolling: touch;
		scrollbar-width: none;
		-ms-overflow-style: none;
		scroll-behavior: smooth;
		-webkit-backface-visibility: hidden;
		-webkit-perspective: 1000;
		will-change: transform;
	}

	.horizontal-scroll::-webkit-scrollbar {
		display: none;
	}
</style>
